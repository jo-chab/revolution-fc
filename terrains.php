<?php    include("_includes/session_test.inc");    include("_includes/_revolutionfc.inc");?>    <!doctype html>    <html><head>    <meta charset="UTF-8">    <title>RFC - Nos Terrains</title>        <?php        include("_includes/head.inc");        echo "<body>";        include("_includes/header.inc");    ?>        <section>                <article class="grid-layout field-filter">                        <div class="filter-select">                <h5>Choisir un filtre</h5>                <div class="btn-filter-select">                    <div class="btn-filter is-inactive" id="btn-filter-type">par Types de surface</div>                    <div class="btn-filter is-inactive" id="btn-filter-city">par Villes</div>                </div>            </div>                        <div class="filter-buttons-city is-hidden">                                <div class="btn-filter" id="cta-city-all">Voir toutes les villes</div>                <?php                                        $stmtFilterCity = $db->prepare('SELECT * from FIELDS_cities order by city_name ASC');                    $stmtFilterCity->execute();                                        $resultsCity = $stmtFilterCity->fetchAll(PDO::FETCH_ASSOC);                                        foreach ($resultsCity as $result) {                        $city = nl2br(stripslashes($result['city_name']));                                                echo "<div class='btn-filter is-inactive' id='cta-city-$city'>$city</div>";                                            }                                ?>            </div>                        <div class="filter-buttons-type is-hidden">                                <div class="btn-filter" id="cta-type-all">Voir tous les terrains</div>                <?php                                        $stmtFilterType = $db->prepare('SELECT * from FIELDS_type order by genre_terrain ASC');                    $stmtFilterType->execute();                                        $resultsType = $stmtFilterType->fetchAll(PDO::FETCH_ASSOC);                                        foreach ($resultsType as $result) {                        $type = nl2br(stripslashes($result['genre_terrain']));                        $typeM = str_replace(" ", "-", $type);                                                echo "<div class='btn-filter is-inactive' id='cta-type-$typeM'>$type</div>";                                            }                                ?>            </div>                </article>                        <article class="w-fields wrapper">            <ul class='list-fields grid-system grid-col-3'>                                <?php                                        $stmtFields = $db->prepare('SELECT * from FIELDS, FIELDS_cities, FIELDS_type where field_data_city = id_city AND field_data_genre = id_genre_terrain order by id_field ASC');                    $stmtFields->execute();                                        $results = $stmtFields->fetchAll(PDO::FETCH_ASSOC);                                        foreach ($results as $result) {                        $map = nl2br(stripslashes($result['field_map']));                        $name = nl2br(stripslashes($result['field_name']));                        $address = $result['field_address'];                        $city = nl2br(stripslashes($result['city_name']));                        $type = nl2br(stripslashes($result['genre_terrain']));                        $typeM = str_replace(" ", "-", $type);                                                echo "            <li class='field-el' data-terrain='$typeM' data-city='$city'>                <div class='field-infos'>                    <h3 class='field-name'>$name</h3>                    ";                        $general_lines = explode("\n", stripslashes($address));                        foreach ($general_lines as $line) {                            // Check if the line is not empty before processing                            if (!empty(trim($line))) {                                echo "<p class='field-address'>$line</p>";                            } else {                                // Replace empty lines with a line break                                echo "<br>";                            }                        }                        echo "                </div>                <a href='$map' class='btn-tertiary btn-text small icon i-arrow' target='_blank' rel='noreferrer'>Voir la carte</a>            </li>            ";                    }                                ?>            </ul>                </article>        </section>        <script type="text/javascript" src="js/filter-fields.js"></script><?php include("_includes/footer.inc") ?>