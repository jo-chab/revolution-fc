<?php    include("../_includes/session_test.inc");    include("../_includes/_revolutionfc.inc");?><!doctype html><html><head><meta charset="UTF-8">        <?php        $stmt = $db->prepare('select * from VOLUNTEER where id_volunteer = ? ');        $stmt->execute([1]);                while ($curseur1 = $stmt->fetch()) {            extract($curseur1);            $title = $volunteer_title;            $desc = nl2br(stripslashes($volunteer_desc));            $photo = 'https://www.revolutionfc.ca/' . $volunteer_img;            $texte = nl2br(stripslashes($volunteer_text));            $texte = str_replace("<br /><br />", "", $texte);            $texte = str_replace("<br />", "", $texte);        }    ?>        <title><?php echo $title ?></title><?php    include("../_includes/head.inc");    echo "<body class='p-volunteer'>";    include("../_includes/header.inc");?><section>    <article class="wrapper-text">        <h2 class="section-title"><?php echo $title ?></h2>        <div class="w-img">            <img src="<?php echo $photo ?>" alt="<?php echo $title ?>" width='' height='' nopin='nopin' />        </div>                <div class="text-content">            <?php echo $texte ?>        </div>                <div class="w-btn">            <a class="btn-secondary btn-brand icon i-arrow" href="/benevoles/experience-communautaire">Dévouvrez une expérience unique</a>        </div>    </article>	</section><section class="" style="border-top: 2px solid #d3d3d3">    <article class="wrapper">                <h3>Découvrez nos prochains évènements</h3>        <div class="w-cards">                        <?php                // Get the current date                $currentDate = date('Y-m-d');                                $stmt = $db->prepare('SELECT * FROM EVENTS, FIELDS WHERE id_field = event_venue AND event_date >= :currentDate AND is_actif = 1 ORDER BY event_date ASC LIMIT 3');                $stmt->bindParam(':currentDate', $currentDate);                $stmt->execute();                                // Check if there are any rows returned                if ($stmt->rowCount() === 0) {                    echo "<h5 id='title-no-event'>Aucun(s) évènement(s) à venir</h5>";                } else {                    $cpt = 0;                    $event_number = 3;                                        $results = $stmt->fetchAll(PDO::FETCH_ASSOC);                                        foreach ($results as $result) {                        if ($cpt < $event_number) {                            setlocale(LC_TIME, 'fr_FR');                                                        $element = $result['id_event'];                                                        $date = date('Y-m-d', strtotime($result['event_date']));                            $date_end = date('Y-m-d', strtotime($result['event_date_end']));                            $date_text = '';                                                        // Check if event_date_end is not empty and not "0000-00-00"                            if (!empty($result['event_date_end']) && $result['event_date_end'] != '0000-00-00') {                                $startMonth = strftime("%B", strtotime($date));                                $endMonth = strftime("%B", strtotime($date_end));                                                                // Check if the start and end months are the same                                if ($startMonth == $endMonth) {                                    $date_text .= strftime("%d", strtotime($date));                                } else {                                    $date_text .= strftime("%d %B", strtotime($date));                                }                                                                $date_text .= ' - ';                                $date_text .= strftime("%d %B %G", strtotime($date_end));                            } else {                                $date_text .= strftime("%d %B %G", strtotime($date));                            }                                                        $date_text = nl2br(stripslashes(utf8_encode($date_text)));                            $title = nl2br(stripslashes($result['event_name']));                            $titleUrl = urlencode(str_replace(' ', '-', ($result['event_name']))); // Generate a URL-friendly version of the event title                            $venue = nl2br(stripslashes($result['field_name']));                                                        $cpt++;                                                        echo "                <div class='card-events'>                    <h6 class='event-date'>$date_text</h6>                    <h4 class='event-title'>$title</h4>                    <h6 class='event-venue'>$venue</h6>                    <div class='w-btn'>                        <a class='btn-secondary' href='/evenements/detail?id=$element&title=$titleUrl' data-event-id='$element' data-event-title='$titleUrl'>En savoir plus</a>                    </div>                </div>                            ";                        }                    }                }                        ?>                    </div>        <div class="w-btn">            <a class="btn-tertiary btn-text large icon i-more" href="/evenements/">Plus d'évènements</a>        </div>    </article></section>		<?php include("../_includes/footer.inc") ?>