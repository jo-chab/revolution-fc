<?php    include("../_includes/session_test.inc");    include("../_includes/_revolutionfc.inc");?>        <!doctype html>    <html><head>    <meta charset="UTF-8">    <title>Évènements</title>        <?php        include("../_includes/head.inc");        echo "<body class='w-home'>";        include("../_includes/header.inc");    ?>            <section class="p-events">                <article class="wrapper wrapper-text">            <div class="event-header">                <h1>Évènements</h1>                <h5>Découvrez tous nos prochains évènements</h5>            </div>        </article>                <article class="wrapper">                                                <?php                    // Get the current date                    $currentDate = date('Y-m-d');                                        $stmt = $db->prepare('SELECT * FROM EVENTS, FIELDS WHERE id_field = event_venue AND event_date >= :currentDate AND is_actif = 1 ORDER BY event_date ASC LIMIT 3');                    $stmt->bindParam(':currentDate', $currentDate);                    $stmt->execute();                                        // Check if there are any rows returned                    if ($stmt->rowCount() === 0) {                        echo "<h2 id='title-no-event'>Aucun(s) évènement(s) à venir</h2>";                    } else {                        $cpt = 0;                        $event_number = 3;                                                $results = $stmt->fetchAll(PDO::FETCH_ASSOC);                                                echo "                                    <table class='table-event'>                <thead>                <tr>                    <th>Date</th>                    <th>Évènements</th>                    <th>Lieu</th>                    <th></th>                </tr>                </thead>                <tbody>                        ";                                                foreach ($results as $result) {                            if ($cpt < $event_number) {                                setlocale(LC_TIME, 'fr_FR');                                                                $element = $result['id_event'];                                $date = date('Y-m-d', strtotime($result['event_date']));                                $date_end = date('Y-m-d', strtotime($result['event_date_end']));                                $date_text = '';                                                                // Check if event_date_end is not empty and not "0000-00-00"                                if (!empty($result['event_date_end']) && $result['event_date_end'] != '0000-00-00') {                                    $startMonth = strftime("%B", strtotime($date));                                    $endMonth = strftime("%B", strtotime($date_end));                                                                        // Check if the start and end months are the same                                    if ($startMonth == $endMonth) {                                        $date_text .= strftime("%d", strtotime($date));                                    } else {                                        $date_text .= strftime("%d %b", strtotime($date));                                    }                                                                        $date_text .= ' - ';                                    $date_text .= strftime("%d %b %G", strtotime($date_end));                                } else {                                    $date_text .= strftime("%d %b %G", strtotime($date));                                }                                                                $date_text = nl2br(stripslashes(utf8_encode($date_text)));                                $title = nl2br(stripslashes($result['event_name']));                                $titleUrl = urlencode(str_replace(' ', '-', ($result['event_name'])));                                $venue = nl2br(stripslashes($result['field_name']));                                                                $cpt++;                                                                echo "                <tr>                    <td>$date_text</td>                    <td class='table-list-title'>$title</td>                    <td class='table-list-complement'>$venue</td>                    <td>                        <a class='btn-table' href='/evenements/detail?id=$element''></a>                        <div class='icon i-long-arrow-table only-tablet'></div>                    </td>                </tr>            ";                            }                        }                    }                                ?>                </tbody>            </table>        </article>            </section><?php include("../_includes/footer.inc") ?>