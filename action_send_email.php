<?php    error_reporting(E_ALL);    ini_set('display_errors', 1);            require_once __DIR__ . '/vendor/autoload.php';        use PHPMailer\PHPMailer\PHPMailer;    use PHPMailer\PHPMailer\Exception;            function post_captcha($user_response)    {        $secret_key = '6Lc8qswcAAAAAMxTldJHIjvjJsxjLA7f_oSNZi6X';        $url = 'https://www.google.com/recaptcha/api/siteverify';        $data = [            'secret' => $secret_key,            'response' => $user_response,        ];                $ch = curl_init($url);        curl_setopt($ch, CURLOPT_POST, true);        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                $result = curl_exec($ch);                if ($result === false) {            return false; // Failed to fetch reCAPTCHA response        }                curl_close($ch);                $response = json_decode($result, true);        return $response['success'];    }            function send_email($name, $email, $subject_email, $message, $recipient_email)    {        $mail = new PHPMailer(true);                try {            $mail->isSMTP();            $mail->Host = 'mail.revolutionfc.ca'; // SMTP server            $mail->SMTPAuth = true;            $mail->Username = '_mainaccount@revolutionfc.ca'; // SMTP username            $mail->Password = 'p0kjws9yb3'; // SMTP password (replace with your SMTP password)            $mail->SMTPSecure = 'ssl';            $mail->Port = 465;                        $mail->setFrom($email, $name);            $mail->addAddress($recipient_email); // Use the dynamic recipient address                        $mail->Subject = "Nouveau message depuis le site internet: $subject_email";            $mail->Body = $message;                        $mail->send();            return true;        } catch (Exception $e) {            return false;        }    }            if ($_SERVER['REQUEST_METHOD'] === 'POST') {        $recaptcha_response = $_POST['g-recaptcha-response'];                if (!post_captcha($recaptcha_response)) {            header('Location: contact.php?m=15');            exit;        }                $name = utf8_decode($_POST['name']);        $email = utf8_decode($_POST['email']);        $message = utf8_decode($_POST['message']);        $subject_email = utf8_decode($_POST['subject']);                $recipient_email = 'design@revolutionfc.ca';//        $recipient_email = 'jonathan.chabert@gmail.com';//        $recipient_email = $_POST['departements'];                if (empty($name) || empty($email) || empty($message)) {            header('Location: contact.php?m=16'); // Handle required field validation            exit;        }                if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {            header('Location: contact.php?m=17'); // Handle invalid email validation            exit;        }                if (send_email($name, $email, $subject_email, $message, $recipient_email)) {            header('Location: contact.php?m=14');            exit;        } else {            header('Location: contact.php?m=18'); // Email sending failed            exit;        }    }?>