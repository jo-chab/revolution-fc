<?php	include("../_includes/session_test.inc");	include("../_includes/_revolutionfc.inc");	function retour_erreur($page,$code_erreur)	{		header('Location: https://www.fssalaberry.ca/admin/index.php?p='.$page.'&m='.$code_erreur);		exit;	}		unset($_GET);	if(isset($_POST['ld_categorie']))	{		$categorie = $_POST['ld_categorie'];	}	else	{		retour_erreur(94,903);	}	if(isset($_POST['zt_doc']))	{		$document =  nl2br(stripslashes($_POST['zt_doc']));			}	else	{		retour_erreur(94,903);	}		$nomoriginel_file = $_FILES['f_document']['name'];  	$typefichier_file = $_FILES['f_document']['type'];  	$taillefichier_file = $_FILES['f_document']['size'] ;   	$adresseserveur_file = $_FILES['f_document']['tmp_name']; 	$erreurupload_file = $_FILES['f_document']['error']; 		if($erreurupload_file==4)	{		$destination_file="";	}	else	{		if ($erreurupload_file > 0) retour_erreur(94,8);				$extensions_valides = array( 'jpg' , 'jpeg' , 'pdf' , 'docx' , 'doc' );		$extension_upload_file = strtolower(  substr(  strrchr($nomoriginel_file, '.')  ,1)  );		if (!in_array($extension_upload_file,$extensions_valides))  retour_erreur(94,102);				$dossier_file = "docs/_ressources/_ressources_entraineurs/";		$fichier_file = basename($nomoriginel_file);		$fichier_file = strtr($fichier_file, 			  'ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ', 			  'AAAAAACEEEEIIIIOOOOOUUUUYaaaaaaceeeeiiiioooooouuuuyy');		$fichier_file = preg_replace('/([^.a-z0-9]+)/i', '-', $fichier_file);		$destination_file = $dossier_file.$fichier_file;		$destination2_file = "../".$destination_file;		if (move_uploaded_file($adresseserveur_file,$destination2_file)) 		{			$ok="upload réussie";		}		else		{			retour_erreur(94,12);		}		}	$sql2="INSERT INTO DOCS (doc_name, doc_cat, doc_link, doc_size) VALUES ('".addslashes($document)."','$categorie','$destination_file','$taillefichier_file')";	if (mysqli_query($sql2))	{		mysqli_close();		header('Location: https://www.fssalaberry.ca/admin/index.php?p=95&m=901&cat='.$categorie);	}	else {		header('Location: https://www.fssalaberry.ca/admin/index.php?p=94&m=902');	}?>