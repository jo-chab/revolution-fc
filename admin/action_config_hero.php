<?php	include("../_includes/session_test.inc");	include("../_includes/_revolutionfc.inc");    include("../_includes/_fileUpload.inc"); // Include the file with the handleFileUpload function		unset($_GET);        $headline = isset($_POST['zt_headline']) ? nl2br(stripslashes($_POST['zt_headline'])) : retour_erreur(4, 23);    $button = isset($_POST['zt_button']) ? nl2br(stripslashes($_POST['zt_button'])) : retour_erreur(4, 23);    $link = isset($_POST['zt_link']) ? nl2br(stripslashes($_POST['zt_link'])) : retour_erreur(4, 23);    $alert1 = isset($_POST['switch_alert_1']) && $_POST['switch_alert_1'] === 'on' ? 1 : 0;            // Query the database to get the current file paths    $stmt = $db->prepare("SELECT hero_image FROM CONFIG_hero_home WHERE id_config = 1");    $stmt->execute();    $currentFiles = $stmt->fetch();        // Define the valid file extensions    $extensions_valides = array('jpg', 'jpeg', 'png');    $page = '4';    $error_code = '1024';        if ($_FILES['f_hero_img']['size'] > 0) {        // Handle file upload for new hero image        $dossier = "img/";        $destination = handleFileUpload($_FILES['f_hero_img'], $dossier, $extensions_valides, $page, $error_code);                // Delete existing hero image file        if (!empty($currentFiles['hero_image'])) {            $fileToDelete = $_SERVER['DOCUMENT_ROOT'] . $currentFiles['hero_image'];            if (file_exists($fileToDelete)) {                unlink($fileToDelete);            }        }    } else {        $destination = $currentFiles['hero_image']; // Keep the existing hero image    }    $stmt = $db->prepare('UPDATE CONFIG_hero_home SET hero_headline = ?, hero_button = ?, hero_link = ?, external_link = ?, hero_image = ? WHERE id_config = 1');    $execute = $stmt->execute([        $headline,        $button,        $link,        $alert1,        $destination    ]);    if ($execute) {        $stmt->closeCursor();        retour_erreur(4,3);    } else {        retour_erreur(4,4);    }?>