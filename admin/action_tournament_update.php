<?php    include("../_includes/session_test.inc");    include("../_includes/_revolutionfc.inc");    include("../_includes/_fileUpload.inc");// Assuming input validation and sanitization is happening elsewhere or is being refactored here.// Check required POST fields    $requiredFields = ['zt_name' => 23, 'zt_desc' => 23, 'ta_tournoi' => 23, 'element' => 'Provide specific error code'];    foreach ($requiredFields as $field => $errorCode) {        if (!isset($_POST[$field]) || trim($_POST[$field]) === '') {            retour_erreur(81, $errorCode);        }    }// Prepare data for database insertion    $name = $_POST['zt_name'];    $desc = $_POST['zt_desc'];    $text = $_POST['ta_tournoi'];    $tournoi = $_POST['element'];    // Define the valid file extensions    $extensions_valides = ['jpg', 'jpeg', 'png'];    $page = 81; // Ensure this is the correct page ID        try {        if ($_FILES['f_photo_tournoi']['size'] == 0) {            $query = 'UPDATE TOURNAMENT SET tournament_name = ?, tournament_desc = ?, tournament_text = ? WHERE id_tournament = ?';            $params = [$name, $desc, $text, $tournoi];        } else {            // Handle file upload            $dossier = "img/_tournoi/";            try {                $destination = handleFileUpload($_FILES['f_photo_tournoi'], $dossier, $extensions_valides, $page, 1024); // Use appropriate error code                $query = 'UPDATE TOURNAMENT SET tournament_name = ?, tournament_desc = ?, tournament_text = ?, tournament_img = ? WHERE id_tournament = ?';                $params = [$name, $desc, $text, $destination, $tournoi];            } catch (Exception $e) {                // handleFileUpload should throw exceptions with appropriate error messages/codes                retour_erreur($page, $e->getMessage()); // Adjust if your error handling supports passing messages directly            }        }                $stmt = $db->prepare($query);        $stmt->execute($params);        $stmt->closeCursor();                retour_erreur(81,3); // Assuming success code    } catch (Exception $e) {        // Log the exception details to debug database errors        retour_erreur(81, 4); // Assuming failure code    }